
// This file is automatically generated. Do not edit it directly.
import { createClient } from '@supabase/supabase-js';
import type { Database } from './types';

const SUPABASE_URL = "https://xegkqqtphhhhhelhxbgl.supabase.co";
const SUPABASE_PUBLISHABLE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhlZ2txcXRwaGhoaGhlbGh4YmdsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDIxNDg4MTIsImV4cCI6MjA1NzcyNDgxMn0.nZuijowIj85GLYmQIWMc-hjJbfd-q-bxeXzkkzk5hH0";

// Import the supabase client like this:
// import { supabase } from "@/integrations/supabase/client";

export const supabase = createClient<Database>(SUPABASE_URL, SUPABASE_PUBLISHABLE_KEY);

// Função de utilidade para testar conexão e verificar dados
export const testSupabaseConnection = async () => {
  try {
    const { data, error } = await supabase
      .from('financial_notes')
      .select('*')
      .limit(5);
    
    if (error) {
      console.error('Erro ao buscar dados:', error);
      return { success: false, error };
    }
    
    console.log('Dados recuperados com sucesso:', data);
    return { success: true, data };
  } catch (error) {
    console.error('Erro na conexão com Supabase:', error);
    return { success: false, error };
  }
};

// Função para testar inserção de dados
export const testSupabaseInsert = async (tabela: 'financial_notes' | 'safe_contacts', dados: any) => {
  try {
    const { data, error } = await supabase
      .from(tabela)
      .insert(dados)
      .select();
    
    if (error) {
      console.error(`Erro ao inserir em ${tabela}:`, error);
      return { success: false, error };
    }
    
    console.log(`Dados inseridos com sucesso em ${tabela}:`, data);
    return { success: true, data };
  } catch (error) {
    console.error(`Erro ao inserir em ${tabela}:`, error);
    return { success: false, error };
  }
};

// Função para verificar usuários no banco de dados
export const checkUsersInSupabase = async () => {
  try {
    const { data, error } = await supabase
      .from('users')
      .select('*')
      .limit(10);
    
    if (error) {
      console.error('Erro ao buscar usuários:', error);
      return { success: false, error };
    }
    
    console.log('Usuários recuperados com sucesso:', data);
    return { success: true, data };
  } catch (error) {
    console.error('Erro ao buscar usuários:', error);
    return { success: false, error };
  }
};
